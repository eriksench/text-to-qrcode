# 文本转二维码程序打包说明

## 方案一：PyInstaller 打包为单个 .exe 文件（推荐）

### 准备工作
1. 确保当前电脑已安装所有依赖：
   ```bash
   pip install -r requirements.txt
   pip install pyinstaller
   ```

### 打包步骤

#### 方法 1：打包为单个文件（最简单）
```bash
pyinstaller --onefile --windowed --name "文本转二维码工具" gui.py
```

参数说明：
- `--onefile`: 打包成单个 .exe 文件
- `--windowed`: 不显示控制台窗口（GUI程序推荐）
- `--name`: 自定义程序名称

生成的文件位置：`dist/文本转二维码工具.exe`

#### 方法 2：打包为文件夹（启动更快）
```bash
pyinstaller --windowed --name "文本转二维码工具" gui.py
```

生成的文件位置：`dist/文本转二维码工具/` 文件夹

### 传输到目标电脑
1. **如果使用 --onefile 方式**：
   - 只需复制 `dist/文本转二维码工具.exe` 到目标电脑
   - 可以用U盘、移动硬盘、或其他方式传输
   - 双击即可运行

2. **如果使用文件夹方式**：
   - 复制整个 `dist/文本转二维码工具/` 文件夹到目标电脑
   - 运行文件夹内的 `文本转二维码工具.exe`

### 注意事项
- 打包后的程序体积可能在 10-30MB 左右
- 首次运行可能会被杀毒软件拦截，需要添加信任
- 无需管理员权限即可运行
- 程序会在当前目录生成二维码图片文件

---

## 方案二：便携式 Python 环境（备选）

如果无法使用 PyInstaller，可以携带整个 Python 环境。

### 准备工作
1. 下载 Python 嵌入式版本（embeddable）：
   - 访问 https://www.python.org/downloads/windows/
   - 下载 "Windows embeddable package (64-bit)" 或 32-bit 版本
   - 例如：python-3.11.x-embed-amd64.zip

2. 在当前电脑上准备环境：
   ```bash
   # 创建传输文件夹
   mkdir portable_qrcode
   cd portable_qrcode

   # 解压嵌入式Python到这里
   # （手动解压下载的 python-xxx-embed-amd64.zip）

   # 安装 pip（嵌入式版本默认没有）
   # 1. 修改 python311._pth 文件，取消注释 "import site" 这一行
   # 2. 下载 get-pip.py 并运行

   # 安装依赖到 Lib/site-packages
   python.exe -m pip install qrcode[pil] Pillow

   # 复制你的程序文件
   # 复制 gui.py, text_to_qr.py, cli.py 到这个文件夹
   ```

3. 创建启动脚本 `run.bat`：
   ```batch
   @echo off
   python.exe gui.py
   pause
   ```

4. 传输整个 `portable_qrcode` 文件夹到目标电脑，运行 `run.bat`

---

## 方案三：使用 cx_Freeze（备选）

```bash
pip install cx_Freeze

# 创建 setup.py
```

然后创建以下 setup.py 文件（需要单独创建）。

---

## 推荐流程总结

**最简单的方式：**
1. 在当前电脑执行：`pip install pyinstaller`
2. 打包：`pyinstaller --onefile --windowed --name "文本转二维码工具" gui.py`
3. 找到生成的 `dist/文本转二维码工具.exe`
4. 用U盘或其他方式复制到目标电脑
5. 在目标电脑上双击运行即可

**优点：**
- ✓ 只需要一个文件
- ✓ 不需要安装任何东西
- ✓ 不需要管理员权限
- ✓ 不需要网络
- ✓ 双击即可运行

**可能遇到的问题：**
1. 杀毒软件拦截：添加信任或暂时关闭杀毒软件
2. 缺少 DLL：在打包时添加 `--add-binary` 参数
3. 程序找不到资源文件：使用相对路径或 `--add-data` 参数
